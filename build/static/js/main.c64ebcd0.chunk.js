(this.webpackJsonpprojeto=this.webpackJsonpprojeto||[]).push([[0],{26:function(e,t,n){},28:function(e,t,n){},37:function(e,t,n){},45:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(29),c=n.n(a),i=(n(37),n(18));n(38),n(40);i.a.initializeApp({apiKey:"AIzaSyBEMFw1ALnF4zz2pz__prDKOO9q_CWRFLY",authDomain:"letmeask-1bc27.firebaseapp.com",databaseURL:"https://letmeask-1bc27-default-rtdb.firebaseio.com",projectId:"letmeask-1bc27",storageBucket:"letmeask-1bc27.appspot.com",messagingSenderId:"243901052622",appId:"1:243901052622:web:c3f642061aae004395029f"});var s=i.a.auth(),o=i.a.database(),u=n(14),d=n(6),l=n(5),j=n.n(l),h=n(8),b=n(9),p=n(25),f=n(32),m=(n(45),n(1)),x=["isOutlined"];function O(e){var t=e.isOutlined,n=void 0!==t&&t,r=Object(f.a)(e,x);return Object(m.jsx)("button",Object(p.a)(Object(p.a)({},r),{},{className:"btn ".concat(n?"outlined":"")}))}n(26);var g=n.p+"static/media/illustration.701e08a0.svg",v=n.p+"static/media/Logo.99e1a02b.svg",k=n.p+"static/media/google-icon.4fa65408.svg",w=n.p+"static/media/copy.6b92206d.svg",C=n.p+"static/media/delete.aa4b67d9.svg",y=n.p+"static/media/check-icon.fac6d46d.svg",A=(n.p,Object(r.createContext)({}));function N(e){var t=Object(r.useState)(),n=Object(b.a)(t,2),a=n[0],c=n[1];function o(){return(o=Object(h.a)(j.a.mark((function e(){var t,n,r,a,o,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new i.a.auth.GoogleAuthProvider,e.next=3,s.signInWithPopup(t);case 3:if(!(n=e.sent).user){e.next=9;break}if(r=n.user,a=r.displayName,o=r.photoURL,u=r.uid,a&&o){e.next=8;break}throw new Error("Missing information from Google Account. ");case 8:c({id:u,name:a,avatar:o});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){var e=s.onAuthStateChanged((function(e){if(e){var t=e.displayName,n=e.photoURL,r=e.uid;if(!t||!n)throw new Error("Missing information from Google Account. ");c({id:r,name:t,avatar:n})}}));return function(){return e()}}),[]),Object(m.jsx)(A.Provider,{value:{user:a,singInWithGoogle:function(){return o.apply(this,arguments)}},children:e.children})}function q(){return Object(r.useContext)(A)}function L(){var e=Object(d.f)(),t=q(),n=t.user,a=t.singInWithGoogle,c=Object(r.useState)(""),i=Object(b.a)(c,2),s=i[0],u=i[1];function l(){return(l=Object(h.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=3;break}return t.next=3,a();case 3:e.push("/rooms/new");case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(){return(p=Object(h.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),""!==s.trim()){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,o.ref("rooms/".concat(s)).get();case 5:if((r=t.sent).exists()){t.next=10;break}return alert("Sala n\xe3o existe."),u(""),t.abrupt("return");case 10:if(!r.val().closedAt){t.next=14;break}return alert("Sala j\xe1 foi encerrada"),u(""),t.abrupt("return");case 14:e.push("rooms/".concat(s));case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(m.jsxs)("div",{id:"auth-page",children:[Object(m.jsxs)("aside",{children:[Object(m.jsx)("img",{src:g,alt:"Imagem da pagina de login"}),Object(m.jsx)("strong",{children:"Pergunte a seu streamer!"}),Object(m.jsx)("p",{children:"Aprenda e compartilhe conhecimento com outras pessoas."})]}),Object(m.jsx)("main",{children:Object(m.jsxs)("div",{className:"main-content",children:[Object(m.jsx)("img",{src:v,alt:"Logo da p\xe1gina de login"}),Object(m.jsxs)("button",{onClick:function(){return l.apply(this,arguments)},className:"create-room",children:[Object(m.jsx)("img",{src:k,alt:"Logo do Google."}),"Crie sua sala com o Google"]}),Object(m.jsx)("div",{className:"separator",children:"ou entre em uma sala"}),Object(m.jsxs)("form",{onSubmit:function(e){return p.apply(this,arguments)},children:[Object(m.jsx)("input",{onChange:function(e){return u(e.target.value)},value:s,type:"text",placeholder:"Digite o c\xf3digo da sala"}),Object(m.jsx)(O,{type:"submit",children:"Entrar na sala"})]})]})})]})}function H(){var e=q().user,t=Object(d.f)(),n=Object(r.useState)(""),a=Object(b.a)(n,2),c=a[0],i=a[1];function s(){return(s=Object(h.a)(j.a.mark((function n(r){var a,i;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),""!==c.trim()){n.next=3;break}return n.abrupt("return");case 3:return a=o.ref("rooms"),n.next=6,a.push({title:c,authorId:null===e||void 0===e?void 0:e.id});case 6:i=n.sent,t.push("/admin/rooms/".concat(i.key));case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(m.jsxs)("div",{id:"auth-page",children:[Object(m.jsxs)("aside",{children:[Object(m.jsx)("img",{src:g,alt:"Imagem da pagina de login"}),Object(m.jsx)("strong",{children:"Pergunte a seu streamer!"}),Object(m.jsx)("p",{children:"Aprenda e compartilhe conhecimento com outras pessoas."})]}),Object(m.jsx)("main",{children:Object(m.jsxs)("div",{className:"main-content",children:[Object(m.jsx)("img",{src:v,alt:"Logo da p\xe1gina de login"}),Object(m.jsx)("h2",{children:"Crie uma nova sala"}),Object(m.jsxs)("form",{onSubmit:function(e){return s.apply(this,arguments)},children:[Object(m.jsx)("input",{type:"text",placeholder:"Nome da sala",onChange:function(e){return i(e.target.value)},value:c}),Object(m.jsx)(O,{type:"submit",children:"Criar sala"})]}),Object(m.jsxs)("p",{children:["Quer entrar em uma sala j\xe1 existente ?"," ",Object(m.jsx)(u.b,{to:"/",children:"Clique aqui"})]})]})})]})}n(28),n(51);function S(e){return Object(m.jsxs)("button",{className:"room-code",children:[Object(m.jsx)("div",{onClick:function(t){navigator.clipboard.writeText(e.code),t.target.parentNode.classList.add("active"),setTimeout((function(){t.target.parentNode.classList.remove("active")}),1500)},children:Object(m.jsx)("img",{src:w,alt:"C\xf3digo da sala."})}),Object(m.jsxs)("span",{children:["Sala ",e.code]})]})}n(52);var I=n(31),E=n.n(I);function M(e){var t=e.content,n=e.author,r=e.children,a=e.isAnswered,c=e.isHightlighted;return Object(m.jsxs)("div",{className:E()({question:!0,highlighted:c,answered:a&&!c}),children:[Object(m.jsxs)("p",{children:[" ",t]}),Object(m.jsxs)("footer",{children:[Object(m.jsxs)("div",{className:"user-info",children:[Object(m.jsx)("img",{src:n.avatar,alt:"Foto do usuario."}),Object(m.jsx)("span",{children:n.name})]}),Object(m.jsx)("div",{className:"question-btns",children:r})]})]})}function z(e){var t=q().user,n=Object(r.useState)([]),a=Object(b.a)(n,2),c=a[0],i=a[1],s=Object(r.useState)(""),u=Object(b.a)(s,2),d=u[0],l=u[1];return Object(r.useEffect)((function(){var n=o.ref("rooms/".concat(e));n.on("value",(function(e){var r,a=e.val(),c=null!==(r=a.questions)&&void 0!==r?r:{},s=Object.entries(c).map((function(e){var n,r,a,c,i=Object(b.a)(e,2),s=i[0],o=i[1];return console.log(Object.entries(null!==(n=o.likes)&&void 0!==n?n:{})),{id:s,content:o.content,author:o.author,isAnswered:o.isAnswered,isHightlighted:o.isHightlighted,likesCount:Object.values(null!==(r=o.likes)&&void 0!==r?r:{}).length,likeId:null===(a=Object.entries(null!==(c=o.likes)&&void 0!==c?c:{}).find((function(e){var n=Object(b.a)(e,2);n[0];return n[1].authorId===(null===t||void 0===t?void 0:t.id)})))||void 0===a?void 0:a[0]}}));return i(s),l(a.title),function(){n.off("value")}}))}),[e,null===t||void 0===t?void 0:t.id]),{title:d,questions:c}}function D(){var e=q().user,t=Object(d.g)(),n=Object(r.useState)(""),a=Object(b.a)(n,2),c=a[0],i=a[1],s=z(t.id),u=s.title,l=s.questions;function p(){return(p=Object(h.a)(j.a.mark((function n(r){var a;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),""!==c.trim()){n.next=3;break}return n.abrupt("return");case 3:if(e){n.next=6;break}throw alert("Usu\xe1rio n\xe3o autentificado, fa\xe7a o login."),new Error("Must be logged in");case 6:return a={content:c,author:{name:e.name,avatar:e.avatar},isHightlighted:!1,isAnswered:!1},n.next=9,o.ref("rooms/".concat(t.id,"/questions")).push(a);case 9:i("");case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function f(){return(f=Object(h.a)(j.a.mark((function n(r,a){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!a){n.next=5;break}return n.next=3,o.ref("rooms/".concat(t.id,"/questions/").concat(r,"/likes/").concat(a)).remove();case 3:n.next=7;break;case 5:return n.next=7,o.ref("rooms/".concat(t.id,"/questions/").concat(r,"/likes")).push({authorId:null===e||void 0===e?void 0:e.id});case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(m.jsxs)("div",{id:"page-room",children:[Object(m.jsx)("header",{children:Object(m.jsxs)("div",{className:"content",children:[Object(m.jsx)("img",{src:v,alt:"Logo do site."}),Object(m.jsx)(S,{code:t.id})]})}),Object(m.jsxs)("main",{children:[Object(m.jsxs)("div",{className:"room-title",children:[Object(m.jsxs)("h1",{children:["Sala: ",u]}),l.length>0&&Object(m.jsxs)("span",{children:[l.length," pergunta (s)"]})]}),Object(m.jsxs)("form",{onSubmit:function(e){return p.apply(this,arguments)},children:[Object(m.jsx)("textarea",{onChange:function(e){return i(e.target.value)},placeholder:"O que voce quer perguntar? ",value:c}),Object(m.jsxs)("div",{className:"form-footer",children:[e?Object(m.jsxs)("div",{className:"user-info",children:[Object(m.jsx)("img",{src:e.avatar,alt:"Foto do usu\xe1rio."}),Object(m.jsx)("h3",{children:e.name})]}):Object(m.jsxs)("span",{children:["Para enviar uma pergunta, ",Object(m.jsx)("button",{children:"fa\xe7a seu login"})]}),Object(m.jsx)(O,{type:"submit",disabled:!e,children:"Enviar pergunta"})]})]}),Object(m.jsx)("div",{className:"question-section",children:l.map((function(e){return Object(m.jsx)(M,{content:e.content,author:e.author,isAnswered:e.isAnswered,isHightlighted:e.isHightlighted,children:!e.isAnswered&&Object(m.jsxs)("button",{type:"button","aria-label":"Marcar como gostei.",className:"like-icon ".concat(e.likeId?"liked":""),onClick:function(){return function(e,t){return f.apply(this,arguments)}(e.id,e.likeId)},children:[e.likesCount>0&&Object(m.jsx)("span",{children:e.likesCount}),Object(m.jsx)("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(m.jsx)("path",{d:"M6 21H3C2.46957 21 1.96086 20.7893 1.58579 20.4142C1.21071 20.0391 1 19.5304 1 19V12C1 11.4696 1.21071 10.9609 1.58579 10.5858C1.96086 10.2107 2.46957 10 3 10H6M13 8V4C13 3.20435 12.6839 2.44129 12.1213 1.87868C11.5587 1.31607 10.7956 1 10 1L6 10V21H17.28C17.7623 21.0055 18.2304 20.8364 18.5979 20.524C18.9654 20.2116 19.2077 19.7769 19.28 19.3L20.66 10.3C20.7035 10.0134 20.6842 9.72068 20.6033 9.44225C20.5225 9.16382 20.3821 8.90629 20.1919 8.68751C20.0016 8.46873 19.7661 8.29393 19.5016 8.17522C19.2371 8.0565 18.9499 7.99672 18.66 8H13Z",stroke:"#737380",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]})},e.id)}))})]})]})}function F(e){var t=e.color;return Object(m.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(m.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.999 17.9995H17.999C19.656 17.9995 20.999 16.6565 20.999 14.9995V6.99951C20.999 5.34251 19.656 3.99951 17.999 3.99951H5.99902C4.34202 3.99951 2.99902 5.34251 2.99902 6.99951V14.9995C2.99902 16.6565 4.34202 17.9995 5.99902 17.9995H7.49902V20.9995L11.999 17.9995Z",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}function G(){q().user;var e=Object(d.f)(),t=Object(d.g)(),n=z(t.id),r=n.title,a=n.questions;function c(){return(c=Object(h.a)(j.a.mark((function n(){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!window.confirm("Tem certeza ?")){n.next=6;break}return n.next=3,o.ref("rooms/".concat(t.id)).update({closedAt:new Date});case 3:e.push("/"),n.next=7;break;case 6:return n.abrupt("return");case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function i(){return(i=Object(h.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Tem certeza que deseja deletar ?")){e.next=3;break}return e.next=3,o.ref("rooms/".concat(t.id,"/questions/").concat(n)).remove();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return(s=Object(h.a)(j.a.mark((function e(n,r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=5;break}return e.next=3,o.ref("/rooms/".concat(t.id,"/questions/").concat(n)).update({isAnswered:!1});case 3:e.next=7;break;case 5:return e.next=7,o.ref("/rooms/".concat(t.id,"/questions/").concat(n)).update({isAnswered:!0});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=Object(h.a)(j.a.mark((function e(n,r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=5;break}return e.next=3,o.ref("/rooms/".concat(t.id,"/questions/").concat(n)).update({isHightlighted:!1});case 3:e.next=7;break;case 5:return e.next=7,o.ref("/rooms/".concat(t.id,"/questions/").concat(n)).update({isHightlighted:!0});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(m.jsxs)("div",{id:"page-room",children:[Object(m.jsx)("header",{children:Object(m.jsxs)("div",{className:"content",children:[Object(m.jsx)("img",{src:v,alt:"Logo do site."}),Object(m.jsxs)("div",{children:[Object(m.jsx)(S,{code:t.id}),Object(m.jsx)(O,{onClick:function(){return c.apply(this,arguments)},isOutlined:!0,children:"Encerrar"})]})]})}),Object(m.jsxs)("main",{children:[Object(m.jsxs)("div",{className:"room-title",children:[Object(m.jsxs)("h1",{children:["Sala: ",r]}),a.length>0&&Object(m.jsxs)("span",{children:[a.length," pergunta (s)"]})]}),Object(m.jsx)("div",{className:"question-section",children:a.map((function(e){return Object(m.jsx)(M,{content:e.content,author:e.author,isAnswered:e.isAnswered,isHightlighted:e.isHightlighted,children:Object(m.jsxs)(m.Fragment,{children:[!e.isAnswered&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{type:"button",onClick:function(){return function(e,t){return s.apply(this,arguments)}(e.id,e.isAnswered)},children:Object(m.jsx)("img",{src:y,alt:"Responder pergunta."})}),Object(m.jsx)("button",{type:"button",onClick:function(){return function(e,t){return u.apply(this,arguments)}(e.id,e.isHightlighted)},children:Object(m.jsx)(F,{color:"".concat(e.isHightlighted?"#835afd":"#737380")})})]}),Object(m.jsx)("button",{type:"button",onClick:function(){return function(e){return i.apply(this,arguments)}(e.id)},children:Object(m.jsx)("img",{src:C,alt:"Botao de deletar."})})]})},e.id)}))})]})]})}var B=function(){return Object(m.jsx)(u.a,{children:Object(m.jsx)(N,{children:Object(m.jsxs)(d.c,{children:[Object(m.jsx)(d.a,{path:"/",exact:!0,component:L}),Object(m.jsx)(d.a,{path:"/rooms/new",component:H}),Object(m.jsx)(d.a,{path:"/rooms/:id",component:D}),Object(m.jsx)(d.a,{path:"/admin/rooms/:id",component:G})]})})})};c.a.render(Object(m.jsx)(B,{}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.c64ebcd0.chunk.js.map